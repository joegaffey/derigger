<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De Rigger</title>
    <link rel="stylesheet" href="styles.css">
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
    <script async type="importmap">
      {
        "imports": {
          "three": "./lib/three.module.js",
          "orbitControls": "./lib/OrbitControls.js"
        }
      }      
    </script>    
    <script async type="text/javascript" src="./lib/dat.gui.min.js"></script>
    <script async type="module" src="./main.js"></script>
  </head>
  <body>
    <div class="loader">
      Loading...
    </div>
    <div class="ta-container">
      <div class="ta-buttons">
        <button id="helpButton">Help</button>
        <button id="listButton">Part List</button>   
        <button id="expButton">Export</button>  
        <button id="importButton">Import</button>
        <input type="file" id="input-file" accept=".csv" hidden>
      </div>
<textarea id="ta" rows="10" cols="43">
8040, 1, 1, 1000, -40, -40, -500, 0, 0, 90
8040, 1, 1, 1000, 500, -40, -500, 0, 0, 90
4040, 1, 1, 500, -40, 0, -480, 0, 90, 90
8040, 1, 1, 500, -40, -40, 100, 0, 90, 90
8040, 1, 1, 500, -40, -40, 460, 0, 90, 90
8040, 1, 1, 550, -40, 590, -200, 90, 0, 90
8040, 1, 1, 550, 500, 590, -200, 90, 0, 90
8040, 1, 1, 500, -40, 540, -200, 90, 90, 90
4040, 1, 1, 400, 40, 80, 100, 0, 0, 90
4040, 1, 1, 400, 380, 80, 100, 0, 0, 90
c4040, 1, 1, 1, 360, 40, 140, 90, 90, 90
c4040, 1, 1, 1, 20, 40, 140, 90, 90, 90
c4040, 1, 1, 1, 360, 40, 460, 180, 90, 90
c4040, 1, 1, 1, 20, 40, 460, 180, 90, 90
c4040, 1, 1, 1, -40, 40, -120, 0, -90, 0
c4040, 1, 1, 1, 500, 40, -120, 0, -90, 0
c4040, 1, 1, 1, 460, 40, -200, 0, 90, 0
c4040, 1, 1, 1, -80, 40, -200, 0, 90, 0
c8040, 1, 1, 1, -40, 500, -200, 0, 0, -90
c8040, 1, 1, 1, 460, 500, -200, 0, 0, 180
c4040, 1, 1, 1, -40, 0, -460, 90, 0, 0
c4040, 1, 1, 1, 460, 0, -460, 90, 0, 90
c8040, 1, 1, 1, 460, 40, 140, 90, 0, 90
c8040, 1, 1, 1, -40, 40, 140, 90, 0, 0
c8040, 1, 1, 1, -40, 40, 460, 90, 0, -90
c8040, 1, 1, 1, 460, 40, 460, 90, 0, 180
</textarea>
    </div>
       
    <dialog id="helpDialog">
      <p>How to design your rig:</p>
      <p>Change the comma separated values in the text area.<br/>Each row represents a part:</p>
      <p>Part, x, y, z (scale), x, y, z (position), x, y, z (angle)</p>
      <p>Currently available parts:
        <ul>
          <li>"8040" - 8040 profile</li>
          <li>"4040" - 4040 profile</li>
          <li>"c8040" - 8040 corner</li>
          <li>"c4040" - 4040 corner</li>
        </ul>
      </p>
      <p>Profile models are 1mm depth.<br/>Scale the z axis to get the desired length.</p>
      <form method="dialog">
        <button>Close</button>
      </form>
    </dialog>
  
    <dialog id="plDialog">
      <p>Parts:</p>
      <p id="plText"></p>
      <form method="dialog">
        <button>Close</button>
      </form>
    </dialog>

    <dialog id="exportDialog">
      <p>Export:</p>
      <div class="vButtons">
        <button onclick="dlParts()">Parts List</button>
        <button onclick="dlCSV()">CSV File</button>
        <button onclick="dlSTL()">3D Model (STL)</button>
      </div>
      <form method="dialog">
        <button>Close</button>
      </form>
    </dialog>
  
    <div id="guiContainer"></div>
  </body>
</html>